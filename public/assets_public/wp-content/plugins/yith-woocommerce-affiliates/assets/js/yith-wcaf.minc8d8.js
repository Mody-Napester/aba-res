jQuery(function(s){function i(){return navigator.userAgent.match(/ipad|iphone/i)}function f(e,t){var i=t.find("#first_name"),n=t.find("#last_name"),a=t.find("#company"),o=t.find("#vat"),t=t.find("#cif");"business"===e?(i.closest("p").hide(),n.closest("p").hide(),t.closest("p").hide(),a.closest("p").show(),o.closest("p").show()):(i.closest("p").show(),n.closest("p").show(),t.closest("p").show(),a.closest("p").hide(),o.closest("p").hide())}function d(e){var t=e.closest("form"),i=t.find('input[type="submit"]'),n=e.attr("name"),a=e.val(),e=e.closest("p");(!e.hasClass("validate-required")||a)&&("withdraw_from"!==n&&"withdraw_to"!==n||a.match(/[0-9]{4}-[0-9]{2}-[0-9]{2}/))&&("payment_email"!==n||a.match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/))?(e.removeClass("yith-field-required"),i.length&&!t.find(".yith-field-required").length&&i.removeClass("disabled").prop("disabled",!1)):e.addClass("yith-field-required")&&i.length&&i.addClass("disabled").prop("disabled",!0)}function o(e,t){e.on("click",function(e){e.preventDefault(),"function"==typeof t&&(t=t(s(this),e)),console.log(t),0<t.length&&(t.is("input")?(i()?t.get(0).setSelectionRange(0,9999):t.select(),document.execCommand("copy")):(e=s("<input/>",{val:t.text(),type:"text"}),s("body").append(e),i()?e.get(0).setSelectionRange(0,9999):e.select(),document.execCommand("copy"),e.remove()),s(document).triggerHandler("yith_wcaf_hide_link_copied_alert")||alert(yith_wcaf.labels.link_copied_message))})}s.fn.yith_wcaf_dashboard_commissions=function(){var e=s(this);e.find(":input.wc-product-search").each(function(){var e={allowClear:!!s(this).data("allow_clear"),placeholder:s(this).data("placeholder"),minimumInputLength:s(this).data("minimum_input_length")?s(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:yith_wcaf.ajax_url,dataType:"json",quietMillis:250,data:function(e){return{term:e.term,action:"yith_wcaf_json_search_products_and_variations",security:yith_wcaf.search_products_nonce}},processResults:function(e){var i=[];return e&&s.each(e,function(e,t){i.push({id:e,text:t})}),{results:i}},cache:!0},multiple:!1},e=s.extend(e,{formatMatches:function(e){return 1===e?yith_wcaf.labels.select2_i18n_matches_1:yith_wcaf.labels.select2_i18n_matches_n.replace("%qty%",e)},formatNoMatches:function(){return yith_wcaf.labels.select2_i18n_no_matches},formatAjaxError:function(e,t,i){return yith_wcaf.labels.select2_i18n_ajax_error},formatInputTooShort:function(e,t){e=t-e.length;return 1==e?yith_wcaf.labels.select2_i18n_input_too_short_1:yith_wcaf.labels.select2_i18n_input_too_short_n.replace("%qty%",e)},formatInputTooLong:function(e,t){t=e.length-t;return 1==t?yith_wcaf.labels.select2_i18n_input_too_long_1:yith_wcaf.labels.select2_i18n_input_too_long_n.replace("%qty%",t)},formatSelectionTooBig:function(e){return 1===e?yith_wcaf.labels.select2_i18n_selection_too_long_1:yith_wcaf.labels.select2_i18n_selection_too_long_n.replace("%qty%",e)},formatLoadMore:function(e){return yith_wcaf.labels.select2_i18n_load_more},formatSearching:function(){return yith_wcaf.labels.select2_i18n_searching}});s(this).select2(e).addClass("enhanced")}),e.find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(e,t){s("#ui-datepicker-div").removeClass(function(){return s("input").get(0).id}).addClass("yith-wcaf-datepicker")}})},s.fn.yith_wcaf_dashboard_clicks=function(){s(this).find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(e,t){s("#ui-datepicker-div").removeClass(function(){return s("input").get(0).id}).addClass("yith-wcaf-datepicker")}})},s.fn.yith_wcaf_dashboard_payments=function(){s(this).find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(e,t){s("#ui-datepicker-div").removeClass(function(){return s("input").get(0).id}).addClass("yith-wcaf-datepicker")}})},s.fn.yith_wcaf_dashboard_withdraw=function(){var n=s(this),a=n.find("#withdraw_from"),o=n.find("#withdraw_to"),e=n.find("#billing_country"),t=n.find('[name="type"]'),i=n.find(":input"),r=n.find("form"),c=n.find(".invoice-mode-radio");a.add(o).on("change",function(){var e=a.val(),t=o.val(),i={action:"get_withdraw_amount",withdraw_from:e,withdraw_to:t,security:yith_wcaf.get_withdraw_amount};e&&t&&s.ajax({type:"POST",url:yith_wcaf.ajax_url,data:i,beforeSend:function(){n.find(".information-panel").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){n.find(".information-panel").unblock()},success:function(e){n.find(".withdraw-current-total").html(e)},dataType:"html"})}),n.find(".datepicker").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0,beforeShow:function(e,t){s("#ui-datepicker-div").removeClass(function(){return s("input").get(0).id}).addClass("yith-wcaf-datepicker")}}),t.on("change",function(){f(t.filter(":checked").val(),n)}).change(),c.on("change",function(){var e=s(this);e.closest("ul.invoice-modes").find(".invoice-mode").slideUp(),e.closest("li").find(".invoice-mode").slideDown()}).not(":checked").closest("li").find(".invoice-mode").hide(),e.trigger("change"),i.on("blur change",function(){d(s(this))}),r.on("submit",function(){if(i.filter(":visible").blur(),i.closest("p.form-row").filter(".yith-field-required").length)return!1})},s.fn.yith_wcaf_dashboard_coupons=function(){var e,t,i,n,a=s(this);e=a.find(".help_tip"),i=e.data("tip"),t=t||"bottom",n=s('<span class="yith_wcaf_tooltip"></span>'),void 0!==i&&i&&!e.find(".yith_wcaf_tooltip").length&&(n.addClass(t),e.append(n.html("<span>"+i+"</span>"))),o(a.find(".copy-trigger"),e=>e.parents("td").find(".copy-target"))},s.fn.yith_wcaf_generate_link=function(){o(s(this).find(".copy-trigger"),e=>e.parents("p").find(".copy-target"))},s.fn.yith_wcaf_registration_form=function(){var e=s(this),t=e.find("#how_promote"),i=e.find("#custom_promote").closest(".form-row");t.length&&t.on("change",function(){"others"===s(this).val()?i.show():i.hide()}).change()},s.fn.yith_wcaf_set_referrer=function(){var t=s(this);t.on("click","a.show-referrer-form",function(e){e.preventDefault(),t.find("form").slideToggle()}),t.on("submit","form.referrer-form",function(e){var t=s(this),i={action:"yith_wcaf_set_referrer",referrer_token:t.find('input[name="referrer_code"]').val(),security:yith_wcaf.set_referrer_nonce};return e.preventDefault(),t.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),s.ajax({type:"POST",url:yith_wcaf.ajax_url,data:i,success:function(e){s(".woocommerce-error, .woocommerce-message").remove(),t.removeClass("processing").unblock(),e&&(t.before(e).find('input[name="referrer_code"]').prop("disabled"),t.slideUp()),s(document).trigger("yith_wcaf_referrer_set")},dataType:"html"}),!1})},s.fn.yith_wcaf_settings=function(){var e=s(this),t=e.find('[name="type"]'),i=e.find("form"),n=i.find(":input");t.length&&t.on("change",function(){f(t.filter(":checked").val(),e)}).change(),n.on("blur change",function(){d(s(this))}),i.on("submit",function(){if(n.filter(":visible").blur(),n.closest("p.form-row").filter(".yith-field-required").length)return!1})},s.yith_wcaf_set_cookies=function(){var e;!yith_wcaf.set_cookie_via_ajax||(e=new URLSearchParams(window.location.search)).has(yith_wcaf.referral_var)&&s.get(yith_wcaf.ajax_url+"?action=yith_wcaf_ajax_set_cookie&"+yith_wcaf.referral_var+"="+e.get(yith_wcaf.referral_var))},s(".yith-wcaf-commissions").yith_wcaf_dashboard_commissions(),s(".yith-wcaf-clicks").yith_wcaf_dashboard_clicks(),s(".yith-wcaf-payments").yith_wcaf_dashboard_payments(),s(".yith-wcaf-withdraw").yith_wcaf_dashboard_withdraw(),s(".yith-wcaf-coupons").yith_wcaf_dashboard_coupons(),s(".yith-wcaf-set-referrer").yith_wcaf_set_referrer(),s(".yith-wcaf-link-generator").yith_wcaf_generate_link(),s(".yith-wcaf-settings").yith_wcaf_settings(),s(".yith-wcaf-registration-form").add(".woocommerce-form-register").add(".yith-wcaf-settings").yith_wcaf_registration_form(),s.yith_wcaf_set_cookies()});