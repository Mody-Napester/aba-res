!function(e){let o,n;e.fn._add_course_to_cart=function(){o.length&&o.submit(function(a){if(a.preventDefault(),n.length&&"yes"!==localize_lp_woo_js.woo_enable_signup_and_login_from_checkout&&"yes"!==localize_lp_woo_js.woocommerce_enable_guest_checkout&&e('body:not(".logged-in")')){n.trigger("click");let a=e("form[name=loginpopopform]");if(!a.find(".params-purchase-code").length){let e=o.find("input[name=course-id]").val();a.append('<p class="params-purchase-code"></p>');let n=a.find(".params-purchase-code");n.append('<input type="hidden" name="add-to-cart" value="'+e+'" />'),n.append('<input type="hidden" name="purchase-course" value="'+e+'" />')}return!1}var t=o.find(".btn-add-course-to-cart"),r=e(this).serialize();return r+="&action=lpWooAddCourseToCart",e.ajax({url:localize_lp_woo_js.url_ajax,data:r,method:"post",dataType:"json",success:function(e){1==e.code?null!=e.redirect_to&&""!=e.redirect_to?window.location=e.redirect_to:(o.closest(".wrap-btn-add-course-to-cart").append(e.button_view_cart),o.remove()):alert(e.message)},beforeSend:function(){t.append('<span class="fa fa-spinner"></span>')},complete:function(){t.find("span").removeClass("fa fa-spinner")},error:function(e){console.log(e)}}),!1})};window.addEventListener("pageshow",function(e){(e.persisted||void 0!==window.performance&&"back_forward"==String(window.performance.getEntriesByType("navigation")[0].type))&&location.reload()}),e(function(){o=e("form[name=form-add-course-to-cart]"),n=e(".thim-login-popup .login"),e.fn._add_course_to_cart()})}(jQuery);
